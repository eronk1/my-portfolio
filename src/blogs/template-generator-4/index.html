<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Template Generator</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Top bar with subject loading, blog import, downloads -->
  <div id="topbar">
    <button id="importBlogBtn">Import Blog</button>
    <input type="file" id="importBlogInput" accept=".json,application/json,.zip" style="display:none;">
    
    <button id="downloadBlogZipBtn">Download Blog Folder (zip)</button>
    <button id="downloadMainJsonBtn">Download main.json</button>
  </div>

  <div class="container">
    <h1>Blog Generator</h1>
    
    <!-- Cover picture input and preview -->
    <div class="cover-picture-container">
      <label for="coverPictureInput">Cover Picture (optional):</label>
      <input type="file" id="coverPictureInput" accept="image/*">
      <div id="coverImagePreview">No file selected</div>
    </div>

    <!-- Blog settings -->
    <div>
      <label for="folderName">Folder Name (optional):</label>
      <input type="text" id="folderName" placeholder="Enter folder name (or leave blank for auto name)">
    </div>

    <div>
      <label for="blogTitle">Blog Title <span class="required">*</span>:</label>
      <input type="text" id="blogTitle" placeholder="Enter blog title" required>
    </div>

    <!-- Subject selection with "Add New Subject..." -->
    <div>
      <label for="blogSubjectSelect">Blog Subject <span class="required">*</span>:</label>
      <select id="blogSubjectSelect">
        <!-- Populated dynamically from config.js -->
      </select>
      <!-- Only visible if "Add New Subject..." is chosen -->
      <input type="text" id="newSubjectInput" placeholder="Type new subject" style="display:none;">
    </div>

    <!-- Container for dynamic sections -->
    <div id="sectionsContainer"></div>

    <!-- Button to add a new top-level section -->
    <button type="button" id="addSectionBtn">Add Section</button>
  </div>

  <!-- Modal for image preview -->
  <div id="imageModal" class="modal">
    <span class="close">&times;</span>
    <img class="modal-content" id="modalImage">
  </div>

  <!-- Include JSZip and FileSaver from CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
  <!-- Include config.js before script.js -->
  <script src="config.js"></script>
  <!-- Our main script -->
  <script src="script.js"></script>
</body>
</html>
